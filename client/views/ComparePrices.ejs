<!DOCTYPE html>
<html>
<head>
  <title>Comparar Precios</title>
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <%- include('partials/Navbar.ejs') %>
  <%- include('partials/Head.ejs') %>

  <div class="container">
    <h1>Comparar Precios</h1>

    <% if (items && items.length > 0) { %>
      <% items.forEach(function(item) { %>
        <h2><%= item.title %></h2> 
        <% item.ingredients.forEach(function(ingredient) { %>
          <h3><%= ingredient.name %></h3>
          <% ingredient.supermarkets.forEach(function(supermarket) { %>
            <p><%= supermarket.name %>: $<%= (supermarket.price).toFixed(2) %></p>
          <% }); %>
        <% }) %>
        <hr>
      <% }) %>

      <h2>Lista de Compra</h2>
      <% for (let supermarket in shoppingList) { %>
        <h3><%= supermarket %>:</h3>
        <% shoppingList[supermarket].ingredients.forEach(function(ingredient) { %>
          <p><%= ingredient.ingredient %>: <%= ingredient.packages %> paquete(s) - $<%= ingredient.cost.toFixed(2) %></p>
        <% }); %>
        <p>Total en <%= supermarket %>: $<%= shoppingList[supermarket].totalCost.toFixed(2) %></p>
        <hr>
      <% } %>

    <% } else { %>
      <p>No se han encontrado recetas o men√∫s para comparar precios.</p>
    <% } %>
  </div>

  <%- include('partials/Footer.ejs') %>
</body>
</html>
